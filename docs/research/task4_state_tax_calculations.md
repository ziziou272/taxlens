# Task 4: State Tax Calculations - Research Findings

**Research Date:** January 2026
**Version:** 1.0

---

## Executive Summary

This document provides comprehensive state tax specifications for California, New York, and Washington - the three primary states for high-income tech professionals. Key findings:

1. **California** has the highest income tax burden (up to 14.63% with all taxes)
2. **New York** has complex rules including NYC city tax (combined up to 14.77%)
3. **Washington** has no income tax but a 7-9.9% capital gains tax
4. **Multi-state sourcing** creates significant complexity for mobile tech workers
5. **RSU/ISO taxation** varies dramatically by state

---

## 1. California State Tax

### 1.1 Income Tax Brackets (2025)

California has 9 progressive tax brackets plus a Mental Health Services Tax.

**Single Filers / Married Filing Separately:**

| Taxable Income | Tax Rate | Cumulative Tax |
|----------------|----------|----------------|
| $0 - $11,079 | 1.00% | $0 + 1% of income |
| $11,079 - $26,264 | 2.00% | $111 + 2% of excess |
| $26,264 - $41,452 | 4.00% | $415 + 4% of excess |
| $41,452 - $57,542 | 6.00% | $1,022 + 6% of excess |
| $57,542 - $72,724 | 8.00% | $1,987 + 8% of excess |
| $72,724 - $371,479 | 9.30% | $3,202 + 9.3% of excess |
| $371,479 - $445,771 | 10.30% | $31,006 + 10.3% of excess |
| $445,771 - $742,953 | 11.30% | $38,658 + 11.3% of excess |
| $742,953+ | 12.30% | $72,239 + 12.3% of excess |

**Married Filing Jointly / Surviving Spouse:**

| Taxable Income | Tax Rate | Cumulative Tax |
|----------------|----------|----------------|
| $0 - $22,158 | 1.00% | $0 + 1% of income |
| $22,158 - $52,528 | 2.00% | $222 + 2% of excess |
| $52,528 - $82,904 | 4.00% | $829 + 4% of excess |
| $82,904 - $115,084 | 6.00% | $2,044 + 6% of excess |
| $115,084 - $145,448 | 8.00% | $3,975 + 8% of excess |
| $145,448 - $742,958 | 9.30% | $6,404 + 9.3% of excess |
| $742,958 - $891,542 | 10.30% | $62,012 + 10.3% of excess |
| $891,542 - $1,485,906 | 11.30% | $77,316 + 11.3% of excess |
| $1,485,906+ | 12.30% | $144,479 + 12.3% of excess |

### 1.2 Mental Health Services Tax (Millionaire's Tax)

| Condition | Additional Tax |
|-----------|---------------|
| Taxable income > $1,000,000 | +1.0% on amount over $1M |

**Effective top rate:** 13.3% (12.3% + 1.0%)

### 1.3 State Disability Insurance (SDI) Tax

Effective 2024, California removed the wage cap on SDI:

| Year | SDI Rate | Wage Cap | Impact |
|------|----------|----------|--------|
| 2023 | 0.9% | $153,164 | Max $1,378 |
| 2024+ | 1.1% | **No cap** | Unlimited |

**Impact on high earners:**
- $500K income: $5,500 SDI tax
- $1M income: $11,000 SDI tax
- $2M RSU vest: $22,000 SDI tax

### 1.4 Total California Tax Rates

For high-income tech employees:

| Income Level | Base Rate | Mental Health | SDI | Total Rate |
|--------------|-----------|---------------|-----|------------|
| $200K - $500K | 9.3-10.3% | 0% | 1.1% | 10.4-11.4% |
| $500K - $1M | 11.3-12.3% | 0% | 1.1% | 12.4-13.4% |
| Over $1M | 12.3% | 1.0% | 1.1% | **14.4%** |

### 1.5 California-Specific Rules

**No Long-Term Capital Gains Preference:**
- All capital gains taxed as ordinary income
- No distinction between short-term and long-term
- Up to 13.3% on all investment gains

**No State AMT:**
- California does not have an Alternative Minimum Tax
- ISO bargain element not subject to state AMT adjustment

**Standard Deduction (2025):**
- Single: $5,540
- Married Filing Jointly: $11,080

---

## 2. New York State Tax

### 2.1 Income Tax Brackets (2025)

New York has 9 progressive tax brackets.

**Single Filers / Married Filing Separately:**

| Taxable Income | Tax Rate | Cumulative Tax |
|----------------|----------|----------------|
| $0 - $8,500 | 4.00% | $0 + 4% of income |
| $8,500 - $11,700 | 4.50% | $340 + 4.5% of excess |
| $11,700 - $13,900 | 5.25% | $484 + 5.25% of excess |
| $13,900 - $80,650 | 5.50% | $600 + 5.5% of excess |
| $80,650 - $215,400 | 6.00% | $4,271 + 6% of excess |
| $215,400 - $1,077,550 | 6.85% | $12,356 + 6.85% of excess |
| $1,077,550 - $5,000,000 | 9.65% | $71,413 + 9.65% of excess |
| $5,000,000 - $25,000,000 | 10.30% | $449,929 + 10.3% of excess |
| $25,000,000+ | 10.90% | $2,509,929 + 10.9% of excess |

**Married Filing Jointly:**

| Taxable Income | Tax Rate | Cumulative Tax |
|----------------|----------|----------------|
| $0 - $17,150 | 4.00% | $0 + 4% of income |
| $17,150 - $23,600 | 4.50% | $686 + 4.5% of excess |
| $23,600 - $27,900 | 5.25% | $976 + 5.25% of excess |
| $27,900 - $161,550 | 5.50% | $1,202 + 5.5% of excess |
| $161,550 - $323,200 | 6.00% | $8,553 + 6% of excess |
| $323,200 - $2,155,350 | 6.85% | $18,252 + 6.85% of excess |
| $2,155,350 - $5,000,000 | 9.65% | $143,754 + 9.65% of excess |
| $5,000,000 - $25,000,000 | 10.30% | $418,263 + 10.3% of excess |
| $25,000,000+ | 10.90% | $2,478,263 + 10.9% of excess |

### 2.2 New York City Income Tax

NYC residents pay additional city tax on top of state tax.

**Single Filers:**

| NYC Taxable Income | NYC Tax Rate |
|--------------------|--------------|
| $0 - $12,000 | 3.078% |
| $12,000 - $25,000 | 3.762% |
| $25,000 - $50,000 | 3.819% |
| $50,000+ | 3.876% |

**Married Filing Jointly:**

| NYC Taxable Income | NYC Tax Rate |
|--------------------|--------------|
| $0 - $21,600 | 3.078% |
| $21,600 - $45,000 | 3.762% |
| $45,000 - $90,000 | 3.819% |
| $90,000+ | 3.876% |

### 2.3 Total NY + NYC Rates

| Income Level | NY State | NYC | Total |
|--------------|----------|-----|-------|
| $100K - $215K | 6.00% | 3.876% | 9.876% |
| $215K - $1M | 6.85% | 3.876% | 10.726% |
| $1M - $5M | 9.65% | 3.876% | 13.526% |
| $5M - $25M | 10.30% | 3.876% | 14.176% |
| $25M+ | 10.90% | 3.876% | **14.776%** |

### 2.4 Tax Benefit Recapture

New York has a "tax benefit recapture" provision for high-income taxpayers:
- Applies to incomes over certain thresholds
- Effectively subjects entire income to top rate
- Additional supplemental tax calculations required

### 2.5 New York-Specific Rules

**No State AMT:**
- New York does not impose a state-level AMT
- ISO exercise has no NY state AMT impact

**Standard Deduction (2025):**
- Single: $8,000
- Married Filing Jointly: $16,050

**High-Income Rates Extended:**
- Top rates (9.65%, 10.3%, 10.9%) extended through 2032

---

## 3. Washington State Tax

### 3.1 No Income Tax

Washington has no state income tax on:
- Wages and salaries
- RSU income
- ISO/NSO exercise income
- ESPP income
- Interest and dividends

### 3.2 Capital Gains Tax (2025)

Washington implemented a capital gains tax in 2022, with rates increased in 2025.

**Two-Tier Rate Structure (Effective January 1, 2025):**

| Taxable Capital Gains | Tax Rate |
|-----------------------|----------|
| $0 - Standard Deduction | 0% |
| Deduction - $1,000,000 | 7.0% |
| Over $1,000,000 | 9.9% |

**Standard Deduction:** $278,000 (2025, inflation-adjusted annually)

### 3.3 What's Taxable

| Asset Type | Subject to WA Cap Gains Tax? |
|------------|------------------------------|
| Long-term capital gains (stocks, bonds) | **YES** |
| Short-term capital gains | NO |
| Real estate sales | NO |
| Retirement account distributions | NO |
| Timber transactions | NO |
| Small business sale (conditions) | NO |
| Livestock/agricultural sales | NO |

### 3.4 Calculation Examples

**Example 1: $500K Long-Term Gain**
```
Gain: $500,000
Deduction: -$278,000
Taxable: $222,000
Tax: $222,000 × 7% = $15,540
```

**Example 2: $2M Long-Term Gain**
```
Gain: $2,000,000
Deduction: -$278,000
Taxable: $1,722,000

Tax calculation:
- First $1M at 7%: $70,000
- Remaining $722K at 9.9%: $71,478
- Total tax: $141,478
```

### 3.5 Key Considerations for Tech Employees

**RSUs and ISOs:**
- RSU vesting income: NOT subject to WA cap gains tax (it's ordinary income)
- Sale of vested RSU shares: Subject to cap gains tax on appreciation after vesting
- ISO sale: Subject to cap gains tax on long-term gains

**ESPP:**
- Qualifying disposition gains: Subject to cap gains tax (LTCG portion)
- Disqualifying disposition: Ordinary income portion not taxed, only LTCG portion

---

## 4. Multi-State Taxation

### 4.1 RSU Sourcing Rules

RSU income is sourced to states based on where work was performed during the vesting period.

**General Formula:**
```
State A Taxable Income = Total RSU Income × (Days Worked in State A / Total Days Worked)
                                            During vesting period
```

### 4.2 California Pro-Rata Rule

California applies the pro-rata rule aggressively:

```python
def calculate_ca_sourced_rsu(
    total_rsu_income: Decimal,
    grant_date: date,
    vest_date: date,
    ca_work_days: int,
    total_work_days: int
) -> Decimal:
    """
    Calculate California-source RSU income for nonresidents.

    California sources RSU income based on workdays between
    grant and vest dates, regardless of current residence.
    """
    allocation_ratio = Decimal(ca_work_days) / Decimal(total_work_days)
    ca_taxable = total_rsu_income * allocation_ratio
    return ca_taxable
```

**Example:**
- RSU granted: January 2022 (while working in CA)
- RSU vests: January 2026 (now in Texas)
- Total vesting period: 1,040 work days
- Days worked in CA: 780 (first 3 years)
- Days worked in TX: 260 (last year)

```
CA allocation: 780/1040 = 75%
If $100,000 RSU income:
- CA taxable: $75,000
- TX taxable: $25,000 (but TX has no income tax)
```

### 4.3 New York Convenience of Employer Rule

New York applies the "convenience of the employer" rule:

**Rule:** If your employer is located in NY and you work remotely from another state for your own convenience (not employer's requirement), NY considers all income NY-source.

**Implications:**
- Remote workers for NYC companies still owe NY tax
- Must prove employer REQUIRED remote work (not just permitted)
- Affects RSUs, salary, and all compensation

**Exception Criteria:**
- Employer has no office in other state
- Work can only be performed at other location
- Employer requires work from other state

### 4.4 State Tax Credits

Most states offer credits for taxes paid to other states to avoid double taxation:

| State | Credit Available? | Notes |
|-------|-------------------|-------|
| California | Yes | Limited to CA tax on same income |
| New York | Yes | Credit for taxes paid to other states |
| New Jersey | Limited | Only for wages, not investment income |
| Texas | N/A | No income tax |
| Washington | N/A | No income tax |

**Credit Calculation:**
```
Credit = MIN(
    Tax paid to other state on same income,
    Home state tax on same income
)
```

### 4.5 Multi-State Scenario Example

**Scenario:** Employee moves from California to Washington mid-year

| Item | California | Washington |
|------|------------|------------|
| Salary (Jan-Jun) | Fully taxable | N/A |
| Salary (Jul-Dec) | Not taxable | No income tax |
| RSU vest (granted in CA) | Pro-rata based on CA days | No income tax |
| Stock sale gains | Not taxable (nonresident) | 7-9.9% if over threshold |

---

## 5. State Tax Comparison

### 5.1 Tax Rates at Key Income Levels

**Single Filer, $300K Income:**

| State | State Tax | Local Tax | Total |
|-------|-----------|-----------|-------|
| California | ~$24,800 (9.3%) | $3,300 SDI | ~$28,100 |
| New York | ~$17,400 (6.85%) | $0 | ~$17,400 |
| NYC Resident | ~$17,400 | ~$11,600 | ~$29,000 |
| Washington | $0 | $0 | $0 |

**Single Filer, $500K Income:**

| State | State Tax | Local Tax | Total |
|-------|-----------|-----------|-------|
| California | ~$49,600 (11.3%) | $5,500 SDI | ~$55,100 |
| New York | ~$31,100 (6.85%) | $0 | ~$31,100 |
| NYC Resident | ~$31,100 | ~$19,400 | ~$50,500 |
| Washington | $0 | $0 | $0 |

**Single Filer, $1M Income:**

| State | State Tax | Mental Health/Local | SDI | Total |
|-------|-----------|---------------------|-----|-------|
| California | ~$109,000 | $0 | $11,000 | ~$120,000 |
| New York | ~$62,400 | $0 | $0 | ~$62,400 |
| NYC Resident | ~$62,400 | ~$38,800 | $0 | ~$101,200 |
| Washington | $0 | $0 | $0 | $0 |

### 5.2 Capital Gains Comparison

**$500K Long-Term Capital Gain (Single Filer):**

| State | Rate | Tax |
|-------|------|-----|
| California | 12.3% | ~$61,500 |
| New York | 6.85% | ~$34,250 |
| NYC Resident | 10.73% | ~$53,650 |
| Washington | 7% | ~$15,540 (after $278K deduction) |

---

## 6. TaxLens Implementation Requirements

### 6.1 Data Fields Needed

**User Profile:**
```python
class StateResidency:
    current_state: str
    residency_start_date: date
    prior_states: List[PriorResidency]

class PriorResidency:
    state: str
    start_date: date
    end_date: date
    work_days_in_state: int
```

**RSU Tracking for Multi-State:**
```python
class RSUStateAllocation:
    grant_id: str
    grant_date: date
    vest_date: date
    state_work_days: Dict[str, int]  # State -> work days
    total_work_days: int

    def get_state_allocation(self, state: str) -> Decimal:
        return Decimal(self.state_work_days.get(state, 0)) / Decimal(self.total_work_days)
```

### 6.2 Calculations Required

1. **State income tax calculation** for CA, NY, WA
2. **NYC city tax calculation** (if applicable)
3. **California SDI calculation** (no cap)
4. **California Mental Health Services Tax** (over $1M)
5. **Washington capital gains tax** (tiered 7%/9.9%)
6. **Multi-state RSU sourcing** (pro-rata allocation)
7. **State tax credits** (avoid double taxation)

### 6.3 Red Flags to Detect

| Red Flag | Condition |
|----------|-----------|
| CA phantom income | User moved from CA but has RSU grants from CA period |
| NY convenience rule trap | Remote worker for NY employer, living elsewhere |
| WA cap gains exposure | Long-term gains approaching $278K deduction |
| No state credit claimed | Multi-state income without credit for taxes paid |
| Missed CA filing | Former CA resident with vesting RSUs |
| Yonkers/NYC resident | Additional local tax obligations |

### 6.4 State Tax Calculator Pseudocode

```python
def calculate_state_tax(
    taxable_income: Decimal,
    state: str,
    filing_status: FilingStatus,
    capital_gains: Decimal = Decimal('0'),
    is_nyc_resident: bool = False
) -> StateTaxResult:
    """
    Calculate state income tax for supported states.
    """

    if state == 'CA':
        base_tax = calculate_ca_income_tax(taxable_income, filing_status)
        mental_health_tax = max(Decimal('0'),
                                 (taxable_income - Decimal('1000000')) * Decimal('0.01'))
        sdi_tax = taxable_income * Decimal('0.011')  # No cap
        return StateTaxResult(
            state_income_tax=base_tax,
            additional_taxes={'mental_health': mental_health_tax, 'sdi': sdi_tax},
            total=base_tax + mental_health_tax + sdi_tax
        )

    elif state == 'NY':
        state_tax = calculate_ny_income_tax(taxable_income, filing_status)
        city_tax = Decimal('0')
        if is_nyc_resident:
            city_tax = calculate_nyc_tax(taxable_income, filing_status)
        return StateTaxResult(
            state_income_tax=state_tax,
            city_tax=city_tax,
            total=state_tax + city_tax
        )

    elif state == 'WA':
        # No income tax, only capital gains
        cap_gains_tax = calculate_wa_capital_gains_tax(capital_gains)
        return StateTaxResult(
            state_income_tax=Decimal('0'),
            capital_gains_tax=cap_gains_tax,
            total=cap_gains_tax
        )

    else:
        raise ValueError(f"State {state} not supported")


def calculate_wa_capital_gains_tax(long_term_gains: Decimal) -> Decimal:
    """
    Calculate Washington state capital gains tax (2025 rates).
    """
    DEDUCTION = Decimal('278000')
    TIER_1_RATE = Decimal('0.07')
    TIER_2_RATE = Decimal('0.099')
    TIER_2_THRESHOLD = Decimal('1000000')

    taxable = max(Decimal('0'), long_term_gains - DEDUCTION)

    if taxable <= TIER_2_THRESHOLD:
        return taxable * TIER_1_RATE
    else:
        tier_1_tax = TIER_2_THRESHOLD * TIER_1_RATE
        tier_2_tax = (taxable - TIER_2_THRESHOLD) * TIER_2_RATE
        return tier_1_tax + tier_2_tax
```

---

## 7. Forms and Filing Requirements

### 7.1 California Forms

| Form | Purpose | Who Files |
|------|---------|-----------|
| **540** | Resident return | CA residents |
| **540NR** | Nonresident return | Former CA residents with CA-source income |
| **540 Schedule CA** | California adjustments | All CA filers |

### 7.2 New York Forms

| Form | Purpose | Who Files |
|------|---------|-----------|
| **IT-201** | Resident return | NY residents |
| **IT-203** | Nonresident return | Nonresidents with NY-source income |
| **IT-360.1** | NYC resident tax | NYC residents |

### 7.3 Washington Forms

| Form | Purpose | Who Files |
|------|---------|-----------|
| **Capital Gains Excise Tax Return** | Report capital gains | Anyone with gains over deduction |
| Due: April 15 | Filed with WA Dept. of Revenue | Electronic filing preferred |

---

## 8. Special Considerations

### 8.1 Telecommuting and Remote Work

**California:**
- Residents taxed on worldwide income
- Remote work doesn't reduce CA tax for CA residents
- Nonresidents: only CA-source income taxed

**New York:**
- Convenience of employer rule applies
- Remote workers for NY employers may still owe NY tax
- Must prove employer REQUIRED remote work

**Washington:**
- No income tax regardless of work location
- Cap gains tax based on WA residency at time of sale

### 8.2 Stock Option Planning by State

**California:**
- No benefit to holding ISOs for long-term treatment (no LTCG rate)
- Consider early exercise + 83(b) to lock in low FMV
- SDI applies to all RSU/NSO income

**New York:**
- LTCG rates same as ordinary income at state level
- NYC adds 3.876% on all income
- No state AMT on ISO exercise

**Washington:**
- No income tax on ISO/NSO exercise
- Only cap gains tax on sale (7-9.9%)
- Significant advantage for equity comp

### 8.3 Year-End Planning Strategies

**California Residents:**
- Defer RSU vests to January if possible (new tax year)
- Consider charitable donations to offset high-income years
- Maximize 401(k) to reduce state taxable income

**New York Residents:**
- Consider moving to NJ (no NYC tax, lower rates)
- Document remote work carefully
- Time equity exercises around income levels

**Washington Residents:**
- Spread large stock sales across years to stay under $1M threshold
- Use $278K deduction each year
- No income tax planning needed for compensation

---

## 9. Sources

### California
- California Franchise Tax Board (FTB)
- Publication 1004: Stock Option Guidelines
- Schedule X: California Tax Brackets
- SB 951: SDI Tax Changes

### New York
- New York State Department of Taxation and Finance
- TSB-M-95(3)I: Stock Options
- TSB-A-24(9)I: RSU Sourcing
- NYC Department of Finance

### Washington
- Washington Department of Revenue
- RCW 82.87: Capital Gains Tax
- ESSB 5813: 2025 Rate Changes

### Multi-State
- Residency and Sourcing Technical Manual (CA FTB)
- Tax Foundation: State Income Tax Rates
- AICPA: Multi-State Taxation of Equity Compensation

---

*Document generated as part of TaxLens Phase 1 Research*
